app-id: one.ablaze.floorp
name: Floorp
runtime: org.freedesktop.Platform
runtime-version: 21.08
sdk: org.freedesktop.Sdk
add-extensions:
  org.fedoraproject.PlatformExtensions.ffmpeg:
    directory: lib/ffmpeg
    bundle: false
    remove-after-build: false
    subdirectories: true
    
command: floorp
modules:                
  - name: firefox
    buildsystem: simple
    build-commands:
      - install -D root.tar.xz /app/root.tar.xz
      - cd /app/ && tar Jxfv root.tar.xz && rm root.tar.xz
    sources:
      - type: file
        path: root.tar.xz

finish-args:
  - --share=ipc
  - --socket=pcsc  
  - --socket=x11
  - --socket=wayland
  - --share=network
  - --socket=pulseaudio
  - --filesystem=home
  - --device=all
  - --talk-name=org.freedesktop.FileManager1
  - --talk-name=org.a11y.Bus 
  - --talk-name=org.gnome.SessionManager 
  - --talk-name=org.freedesktop.Notifications
  - --talk-name=org.freedesktop.ScreenSaver 
  - --system-talk-name=org.freedesktop.NetworkManager
